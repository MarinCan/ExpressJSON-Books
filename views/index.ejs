<!DOCTYPE html>
<html>
  <head>
    <title> Libros JSON </title>
    <% if (modo === 'dark'){ %> 
      <%- include('partials/head-dark.ejs') %>
    <% } else { %> 
      <%- include('partials/head.ejs') %>
    <% } %> 
    
  </head>
  <body>
    <% if (modo === 'dark'){ %> 
      <%- include('partials/navigation-dark.ejs') %>
    <% } else { %> 
      <%- include('partials/navigation.ejs') %>
    <% } %> 

    <div>
      <a href="/cookie"><button id="b-modo">Modo</button></a>
    </div>

    <section class="container d-flex flex-wrap justify-content-center align-items-center">
      <% for (let i=0; i< libros.length; i++){ %> 

        <div class="card" style="width: 30%; margin: 1rem; background-color: rgb(234, 234, 234); box-shadow: 1px 1px 4px black;">

          <img src=<%=libros[i].image %> class="card-img-top">
          
          <div class="card-body d-flex flex-column justify-content-center align-items-center">
            <h3 class="card-title"> <%=libros[i].title %> </h3>
            <p class="card-text">Autor: <%=libros[i].author %></p>
            <p class="card-text"><b>Descripción: </b><%=libros[i].description %></p>
            <button onclick="confirmar()" class="btn btn-danger text-white">Eliminar</button>
          </div>
        </div>

      <% } %> 

    </section>

    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>  
    
    <script>
        function confirmar(){
          Swal.fire({
          title: '¿Estás seguro?',
          text: 'Vas a eliminar ',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Eliminar!'
        }).then((result) => {
          if (result.isConfirmed) {
            Swal.fire({
              title:'Libro eliminado',
              icon: 'error',
              showConfirmButton: false
            })
              window.setTimeout(()=> window.location="/", 1000)
            }
          })
        }
    </script>
  </body>
</html>
